<% provide(:title, "Edit Villager") %>
<div class="full-page">
  <div class="inner-page">
    <h1 class="page-title">Edit Villager Info</h1>

    <%= render "form", model: [@game, @villager] %>
    <div class="profile-page-preference-table">
      <table>
        <tr>
          <th>Item</th>
          <th>Preference</th>
        </tr>
      <% @preferences.each do |pref| %>
        <tr>
          <td><%= item_name(pref.item_id) %></td>
          <td><%= pref.opinion %></td>
          <td><%= button_to 'Delete', preference_path(pref), class: "button delete-button",
                                           method: :delete,
                                           data: { confirm: "Really delete this preference?" } %></td>
        </tr>
      <% end %>
      </table>
    </div>
    <%= button_to 'Delete Villager', game_villager_path, class: "button",
                                     method: :delete,
                                     data: { confirm: "Really delete #{@villager.name}?" } %>
    <br>
    <br>
    <%= link_to "#{@villager.name}'s Page", game_villager_path, class: "button" %>
  </div>
</div>
